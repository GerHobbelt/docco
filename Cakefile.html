<!DOCTYPE html>  <html> <head>   <title>Cakefile</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <meta name="generator" content="Docco">   <link rel="stylesheet" media="all" href="/docas/stylesheets/docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>            <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="Cakefile.html">                 Cakefile.coffee_               </a>                                           <a class="source" href="package.html">                 package.json               </a>                                           <a class="source" href="test.html">                 test.sh_               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               Cakefile             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>                            </td>             <td class="code">               <div class="highlight shebang"><pre><span>{spawn,</span> <span>exec}</span> <span>=</span> <span>require</span> <span>'child_process'

option</span> <span>'-p',</span> <span>'--prefix</span> <span>[DIR]',</span> <span>'set</span> <span>the</span> <span>installation</span> <span>prefix</span> <span>for</span> <span>`cake</span> <span>install`'
option</span> <span>'-w',</span> <span>'--watch',</span> <span>'continually</span> <span>build</span> <span>the</span> <span>docas</span> <span>library'

task</span> <span>'build',</span> <span>'build</span> <span>the</span> <span>docco</span> <span>library',</span> <span>(options)</span> <span>->
</span> <span></span> <span>coffee</span> <span>=</span> <span>spawn</span> <span>'coffee',</span> <span>['-c'</span> <span>+</span> <span>(if</span> <span>options.watch</span> <span>then</span> <span>'w'</span> <span>else</span> <span>''),</span> <span>'-o',</span> <span>'lib',</span> <span>'src']
</span> <span></span> <span>coffee.stdout.on</span> <span>'data',</span> <span>(data)</span> <span>-></span> <span>console.log</span> <span>data.toString()
</span> <span></span> <span>coffee.stderr.on</span> <span>'data',</span> <span>(data)</span> <span>-></span> <span>console.error</span> <span>data.toString()

task</span> <span>'install',</span> <span>'install</span> <span>the</span> <span>`docco`,</span> <span>`docci`,</span> <span>and</span> <span>`docas`</span> <span>command</span> <span>into</span> <span>/usr/local</span> <span>(or</span> <span>--prefix)',</span> <span>(options)</span> <span>->
</span> <span></span> <span>base</span> <span>=</span> <span>options.prefix</span> <span>or</span> <span>'/usr/local'
</span> <span></span> <span>lib</span> <span></span> <span>=</span> <span>base</span> <span>+</span> <span>'/lib/docas'
</span> <span></span> <span>exec([
</span> <span></span> <span></span> <span></span> <span>'mkdir</span> <span>-p</span> <span>'</span> <span>+</span> <span>lib
</span> <span></span> <span></span> <span></span> <span>'cp</span> <span>-rf</span> <span>bin</span> <span>README</span> <span>resources</span> <span>vendor</span> <span>lib</span> <span>'</span> <span>+</span> <span>lib
</span> <span></span> <span></span> <span></span> <span>'ln</span> <span>-sf</span> <span>'</span> <span>+</span> <span>lib</span> <span>+</span> <span>'/bin/docco</span> <span>'</span> <span>+</span> <span>base</span> <span>+</span> <span>'/bin/docco'
</span> <span></span> <span></span> <span></span> <span>'ln</span> <span>-sf</span> <span>'</span> <span>+</span> <span>lib</span> <span>+</span> <span>'/bin/docci</span> <span>'</span> <span>+</span> <span>base</span> <span>+</span> <span>'/bin/docci'
</span> <span></span> <span></span> <span></span> <span>'ln</span> <span>-sf</span> <span>'</span> <span>+</span> <span>lib</span> <span>+</span> <span>'/bin/docas</span> <span>'</span> <span>+</span> <span>base</span> <span>+</span> <span>'/bin/docas'
</span> <span></span> <span>].join('</span> <span>&&</span> <span>'),</span> <span>(err,</span> <span>stdout,</span> <span>stderr)</span> <span>->
</span> <span></span> <span></span> <span></span> <span>console.error</span> <span>stderr</span> <span>if</span> <span>err
</span> <span></span> <span>)

</span></pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 